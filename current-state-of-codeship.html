<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" property="og:description" content="For the last month I’ve been using Codeship for Continuous Integration on my current client project. These are my current thoughts on this hosted service that works with Github and BitBucket repositories.">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="https://jamescooke.info/theme/droidstrap.css">
        <link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>


        <title>Current state of Codeship // James Cooke // Brighton-based Python developer</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width">
    </head>

    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
        <div class="fake"> </div>
        <div class="container">
            <div class="row">
                <header class="span3">
                    <h1 class="blogtitle">
                        <a href="https://jamescooke.info"><img id="profileimg" src="/images/coding_cooke_ltd.png" alt="James Cooke" ></a>James Cooke
                    </h1>
                    <nav>
                        <ul>
                                <li><a href="/">Home</a></li>
                                <li><a href="/pages/hello-my-name-is-james.html">About</a></li>
                                <li><a href="/feeds/all.atom.xml">Atom Feed</a></li>
                                                        </ul>
                    </nav>
                </header>

    <section class="span7 offset1 content">
        <article class="blogpost">
            <header>
                <h1>Current state of&nbsp;Codeship</h1>
                <p class="postdate" title="2014-10-12T18:00:00+01:00">- Posted Oct 12, 2014</p>
            </header>
            <div class='article-content'>
                <div class="section" id="background">
<h2>Background</h2>
<p>In September I was introduced to <a class="reference external" href="https://www.codeship.io/">Codeship</a> at a
presentation by <a class="reference external" href="http://anglepoised.com/">Paul Love</a>.  These are some of the
learnings I have from using their hosted service primarily for <a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_integration">Continuous
Integration</a> for the
last couple of weeks on a client&nbsp;project.</p>
<p>This post isn&#8217;t about advantages and disadvantages of <span class="caps">CI</span> or <a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_delivery">Continuous
Delivery</a>, but more focused
on Codeship&#8217;s offering currently, compared to other <span class="caps">CI</span> services I&#8217;ve used over
the last 6 months or&nbsp;so.</p>
</div>
<div class="section" id="tl-dr">
<h2><span class="caps">TL</span>;<span class="caps">DR</span></h2>
<p>Codeship is relatively new and working hard to stabilise the system while
providing documentation and&nbsp;service.</p>
<p>The 100 free builds they provide per month, along with the ability to integrate
with <a class="reference external" href="https://bitbucket.org/">BitBucket</a> mean that you can run private
projects on <span class="caps">CI</span> for free, but watch out for their lack of&nbsp;stability.</p>
</div>
<div class="section" id="positives">
<h2>Positives</h2>
<div class="section" id="good-value">
<h3>Good&nbsp;value</h3>
<p>Codeship currently offers <a class="reference external" href="https://www.codeship.io/pricing">100 builds a month for free</a> on private repos that include BitBucket and
<a class="reference external" href="https://github.com/">Github</a> - this is <strong><span class="caps">GOOD</span></strong>. It&#8217;s hard to find hosted <span class="caps">CI</span>
systems that will work with non-Github repository&nbsp;hosting.</p>
</div>
<div class="section" id="good-support">
<h3>Good&nbsp;support</h3>
<p>Codeship&#8217;s support team know their&nbsp;stuff.</p>
<p>I&#8217;ve had multiple discussions with Codeship&#8217;s support via email and Twitter and
I&#8217;ve found that they get back to you with timely email replies and suggestions
about why things are breaking. Great for a free&nbsp;service!</p>
</div>
<div class="section" id="good-speed">
<h3>Good&nbsp;speed</h3>
<p><strong>Builds are <span class="caps">QUICK</span>!</strong> So quick that I thought they weren&#8217;t using a real <span class="caps">DB</span> and
wrote a test to prove that they were listening to the settings I&#8217;d pushed
specifically for&nbsp;Codeship.</p>
</div>
</div>
<div class="section" id="negatives">
<h2>Negatives</h2>
<p>Unfortunately the good freeness above comes with some&nbsp;disadvantages.</p>
<div class="section" id="false-negatives">
<h3>False&nbsp;negatives</h3>
<p>Some of my builds have received false negatives meaning they have failed when
they shouldn&#8217;t have. This is annoying but manageable and can often be solved by
re-running the&nbsp;build.</p>
<p>For example, I&#8217;ve had a couple of builds happen on an instance where the
database wasn&#8217;t available when the tests started running, so everything went
<span class="caps">RED</span>. Slack then went <span class="caps">RED</span>. Client team start&nbsp;worrying.</p>
<p>Codeship&#8217;s solution for this was &#8220;Add <cite>sleep 3</cite> to make the tests wait 3
seconds before running&#8221;. This works but why isn&#8217;t Codeship&#8217;s instance build
process checking this before starting the&nbsp;run?</p>
</div>
<div class="section" id="false-positives">
<h3>False&nbsp;positives</h3>
<p>Builds have received false positives. They have passed when they shouldn&#8217;t
have - and this is <strong>far worse</strong> than a false&nbsp;negative.</p>
<p>This week a build on Codeship had <cite>git submodule init</cite> fail, but the build
didn&#8217;t go red. The same condition happened last week and the build <em>did</em> fail.
While I&#8217;m writing this, Codeship are looking into the&nbsp;problem.</p>
</div>
<div class="section" id="scarce-documentation">
<h3>Scarce&nbsp;documentation</h3>
<p>It&#8217;s not very clear how to work with teams, amongst other topics. Team members
can&#8217;t see how many remaining free builds are available each month so they can&#8217;t
see if they&#8217;re using up the allowance of free builds quickly or&nbsp;not.</p>
</div>
<div class="section" id="artefacts-need-special-attention">
<h3>Artefacts need special&nbsp;attention</h3>
<p>It&#8217;s hard to get build artefacts off Codeship&#8217;s build instances since the
system burns the instance once the build is complete regardless of result. This
means if you don&#8217;t push artefacts off the server yourself with a script,
they&#8217;re&nbsp;gone.</p>
<p>Compare with <a class="reference external" href="https://circleci.com/">CircleCI</a> - they <a class="reference external" href="https://circleci.com/docs/build-artifacts">keep build artefacts
in a special folder</a> available for
further processing, downloading, or access after the build is&nbsp;complete.</p>
</div>
<div class="section" id="test-commands-are-in-codeship-not-repo">
<h3>Test commands are in Codeship not&nbsp;repo</h3>
<p>A minor gripe I have with the Codeship system is that the test setup and run
commands are stored in the configuration for the project on their site. With
Travis for example, the server runs the commands it finds in <tt class="docutils literal">.travis.yml</tt>.</p>
<p>The benefit of putting the test commands in the repo is that they can be easily
coordinated with git commits - if you want to change how something is run, you
can do it all in the code, commit and&nbsp;push.</p>
<p>The Codeship way means copy-and-pasting run commands up onto their website and
then pushing new code to be tested with those settings. It makes it hard to
prove which branch was run with which settings, or if things were changed to
make builds&nbsp;pass.</p>
</div>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>Most concerning are the false negatives and positives on build. It&#8217;s very
important that a dev team can trust their <span class="caps">CI</span>/<span class="caps">CD</span> service 100%. These are the
results for the current Django project I&#8217;m building on&nbsp;Codeship:</p>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script><div class="math">
\begin{equation*}
\frac {1\ False\ Negative + 1\ False\ Positive}
      {37\ Total\ Builds} = 5\%\ Incorrect\ Results
\end{equation*}
</div>
<p>These are the false builds that I&#8217;m aware of - there might be some that have
gone unnoticed. For me, a figure of 95% success makes Codeship &#8216;just&#8217; stable
enough for work, but it&#8217;s <strong>free and works with Bitbucket</strong> and that&#8217;s a
massive positive. I would be disappointed if we were on a paid account and
receiving the same&nbsp;instability.</p>
<p>For the future, if they can stabilise the builds and document the system then
they could become the go-to <span class="caps">CI</span> service for teams on&nbsp;Bitbucket.</p>
</div>
<div class="section" id="project-background">
<h2>Project&nbsp;Background</h2>
<p>I&#8217;m running 125 tests in around 15s on a Python (2.7) Django (1.7) project that
makes integrated <span class="caps">API</span> calls to Dropbox, sits on top of MySQL, runs coverage and&nbsp;flake8.</p>
<p>Thanks for&nbsp;reading.</p>
</div>
<script type='text/javascript'>if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
            </div>
        </article>

        <hr />

        <p class="article-meta">
            &ndash;
            Posted in <a href="https://jamescooke.info/category/code.html">Code</a>
                with
tag                    <a href="https://jamescooke.info/tag/topictesting.html">topic:testing</a>
                <br>
                &ndash; <a href='https://github.com/jamescooke/blog/blob/master/content/1410-codeship.rst'>View, comment, edit source on GitHub</a>
                <br>
                &ndash; Further reading:
                <ul>
                    <li>
                        <a href="https://jamescooke.info/arrange-act-assert-pattern-for-python-developers.html">Arrange Act Assert pattern for Python&nbsp;developers</a>
                        <p class="first last">This post introduces the Arrange Act Assert pattern of testing and
shows how it can be used in a Python context with&nbsp;Pytest.</p>
</li>
                    <li>
                        <a href="https://jamescooke.info/python-unittest-asserttrue-is-truthy-assertfalse-is-falsy.html">Python unittest: <cite>assertTrue</cite> is truthy, <cite>assertFalse</cite> is&nbsp;falsy</a>
                        <p class="first last">Exploring Python&#8217;s <tt class="docutils literal">unittest</tt> module boolean assert methods and how
they can be misleading in certain situations, but not if you <span class="caps">RTFM</span> of&nbsp;course.</p>
</li>
                    <li>
                        <a href="https://jamescooke.info/aaa-part-2-extracting-arrange-code-to-make-fixtures.html"><span class="caps">AAA</span> Part 2: Extracting Arrange code to make&nbsp;fixtures</a>
                        <p class="first last">This post explores how to extract arrangement code when working with
the Arrange Act Assert pattern so that it can be used with certainty
across the test&nbsp;suite.</p>
</li>
                </ul>
        </p>

        <hr />


 
    </section>

            </div>
            <div class="row">
                <footer class="offset4 span7">
                    <p>&copy; James Cooke &ndash;
                        Built with <a href="https://github.com/jamescooke/droidstrap">Droidstrap theme</a>
                        for <a href="https://blog.getpelican.com/">Pelican</a>
                    </p>
                    <p>Licensed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
                </footer>
        </div>

    </body>
</html>